{% extends 'main/base.html' %}

{% block content%}
{% include 'main/navbar.html' %}

<section id="bookInfo" style="display: flex; justify-content: space-between; margin-left: 8%; margin-right: 2%; font-size: 0.7em;">
    <div style="width: 69%;">
        <div  style="background-color: white; height: 25vh; margin-bottom: 15px; padding: 20px; display: flex; height: fit-content;border-radius: 10px;">
            <img height="150vh" src="{{ book.img_url}}" alt="" style="border-radius: 5px;">
            <div style="padding: 0px 10px;">
                <h3 style="font-size: 1em; font-weight: bolder ;">{{ book.title }}</h3>
                <p class="mb-0">{{ book.description|slice:":400" }}</p>
                <p><a href="">Read more</a></p>
                <h4 style="font-size: 0.7em; font-weight: bold ;">By {{ book.author}}</h4>
            </div>
        
        </div>
        <div style="background-color: white; height: 40vh;">
            <h3>Borrow history</h3>
            <ul class="pe-3">
                <li class="d-flex justify-content-between">
                    <p>MEMBER</p>
                    <p>COPY ID</p>
                    <p>RETURN DATE</p>
                    <p>STATUS</p>
                    <p>ACTION</p>
                    
                  <hr>  
                </li>
                <hr>
                {% for transaction in transactions%}
                <li class="d-flex justify-content-between">
                    <p style="width: 25%;" class="text-start">{{ transaction.member.first_name }} {{ transaction.member.last_name }}</p>
                    <p style="width: 25%;" class="text-start">{{ transaction.copyId|stringformat:"s"| slice:":5" }}</p>
                    <p style="width: 25%;" class="text-start">{{ transaction.return_date| date }}</p>
                    <p style="width: 25%;" class="text-start">{{ transaction.status}}</p>
                    <p style="width: 25%;">
                        <div class="dropdown">
                        <a href="#" role="button" data-bs-toggle="dropdown" data-bs-target="#c"  style="position: absolute; right: 20vh;">
                        ...
                       </a>
                       <ul  id="c" class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                        <li><a class="dropdown-item" href="#"><button class="btn btn-primary issueBookBtn m" style="font-size: 1vh; width: 30px; padding: 0px; padding: 3px 2px;" type="button" data-bs-toggle="modal" data-bs-target="#myModal3" id="{{ member.first_name }} {{ member.last_name }}">Issue book</button></a></li>
                        <li>
                          <a class="dropdown-item" href="#">
                          <button class="btn btn-primary updateBookStatus" style="font-size: 1vh; width: 30px; padding: 0px; padding: 3px 2px;" type="button" data-bs-toggle="modal" data-bs-target="#myModal5" id="{{transaction.copyId}}">Update</button>
                        </a>
                        </li>
                        <li>
                          <a class="dropdown-item" href=>
                          <button class="btn btn-primary updatememberBtn" style="font-size: 1vh; width: 30px; padding: 0px; padding: 3px 2px;" type="button" id="{{ member.member_id }}">Member details</button>
                        </a>
                        </li>
                        <li>
                          <a class="dropdown-item" href="#">  <button id="{{member.member_id}}" class="btn btn-danger deleteMemberBtn" style="font-size: 1vh; width: 30px; padding: 3px 2px;" data-bs-toggle="modal" data-bs-target="#myModal2">Delete</button></a>
                        </li>
                        </ul>
                        
                      
                    </div></p>
                   
                </li>
                <hr>
                {% endfor %}
            </ul>
    
        </div>
    </div>
    <div style="width: 29%; background-color: white; height: fit-content; padding: 15px; border-radius: 10px;">
        <h4 style="font-size: 0.8em; font-weight: bold ;">PUBLISHER</h4>
        <p  style="font-size: 0.7em;">{{ book.publisher }}</p>
        <h4 style="font-size: 0.8em; font-weight: bold ;">PUBLICATION DATE</h4>
        <p  style="font-size: 0.7em;">{{ book.publish_date }}</p>
        <h4 style="font-size: 0.8em; font-weight: bold ;">EDITION</h4>
        <p  style="font-size: 0.7em;">{{ book.edition }}</p>
        <h4 style="font-size: 0.8em; font-weight: bold ;">LANGUAGE</h4>
        <p  style="font-size: 0.7em;">{{ book.language }}</p>
        <h4 style="font-size: 0.8em; font-weight: bold ;">GENRE</h4>
        <p  style="font-size: 0.7em;">{{ book.category }}</p>
        <h4 style="font-size: 0.8em; font-weight: bold ;">NUMBER OF COPIES</h4>
        <p  style="font-size: 0.7em;">{{ book.quantity }}</p>
        <h4 style="font-size: 0.8em; font-weight: bold ;">PAGES</h4>
        <p  style="font-size: 0.7em;">{{ book.pages }}</p>
    </div>
</section>

{% endblock content%}