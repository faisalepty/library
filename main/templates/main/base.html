
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;700&display=swap" rel="stylesheet">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

<link rel="stylesheet" href="{% static 'css/main.css' %}">
<script src="{% static 'css/min.js' %}"></script>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body >
    <div class="">
        {% block content %}


        {% endblock content %}
    </div>
    



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="{% static 'js/addBook.js' %}"></script>
    <script src="{% static 'js/addMember.js' %}"></script>
    <script src="{% static 'js/UpdateBook.js' %}"></script>
    <script src="{% static 'js/deleteBook.js' %}"></script>
    <script src="{% static 'js/issueBook1.js' %}"></script>
    <script src="{% static 'js/updateMember.js' %}"></script>
    <script src="{% static 'js/deleteMember.js' %}"></script>

<script>


const updateStatus = document.querySelectorAll('.updateBookStatus');
const updateStatusBtn = document.getElementById('updateStatusBtn');
const updateStatusCsrfToken = document.getElementById('updateStatusCsrfToken');
const amountPaid = document.getElementById('amntPaid');
console.log('hh', updateStatusCsrfToken.firstElementChild.value, 'hh')
let copyId
updateStatus.forEach(btn => {
  btn.addEventListener('click', (e) => {
    copyId = e.target.id
  })
})
updateStatusBtn.addEventListener('click', (e) => {
  $.ajax({
    type: 'POST',
    data: {'csrfmiddlewaretoken': updateStatusCsrfToken.firstElementChild.value, 'amountPaid': amountPaid.value},
    url: `/updatebookreturn/${copyId}`,
    success: (res) => {
      console.log(res)
    }
  })
})

const DSearchForm = document.getElementById('searchform');
const btnSearch = document.getElementsByClassName('bi-search')[0];
const searchfilterBtn = document.getElementById('searchFilter');
const searchFilterDrpDown = document.getElementById('searchFilterDrpDown');
const searchChildNodesArr = Array.from(searchFilterDrpDown.childNodes);
const searchType = document.getElementsByName('searchType')[0];

searchChildNodesArr.forEach(child => {
  child.addEventListener('click', (e) => {
    searchfilterBtn.innerText = e.target.innerText
    searchType.value = e.target.id
  })
})







function successAlert(){
  const successmodal = document.getElementById('myModal4');
  const backdrop = document.getElementsByClassName('modal-backdrop')
  [0];
  const body = document.getElementsByTagName('body')[0];
  successmodal.classList.add('show');
  successmodal.style.display = 'block'
  setTimeout(function(){
    successmodal.classList.remove('show')
    body.classList.remove('modal-open')
    successmodal.style.display = 'none'
    body.style = ''
    backdrop.remove()
  }, 2000)
}

    // const searchInput = document.getElementById('searchform');
    // const searchBtn = document.getElementById('searchbtn');
    // const searchResults = document.getElementById('searchResults');

    // document.addEventListener('click', (e) => {
    //   if (e.target != searchInput || e.target != searchResults){
    //     searchResults.classList.add('d-none')
    //         searchInput.style.borderBottom = '1px solid grey'
    //         searchInput.style.borderRadius = '15px'
    //   }
    // })
   
    
    // searchInput.addEventListener('input', (e) => {
    //   e.preventDefault()
    //   let bookName = e.target.value
    //   $.ajax({
    //     type: 'GET',
    //     headers: {'X-Requested-With': 'XMLHttpRequest'},
    //     url: `/?q=${ bookName }`,
    //     success: function (res) {
    //       if(bookName !== '' && res.filterdData.length > 0){
    //         searchResults.classList.remove('d-none')
    //         e.target.style.borderRadius = '15px 15px 0 0'
    //         e.target.style.borderBottom = 'none' 
           
    //         y = ''
    //         for(let i = 0; i < res.filterdData.length && i < 5; i++){
    //             y = y + `<li><p class="dropdown-header">${ res.filterdData[i] }</p></li>`
    //         }
    //         console.log(y)
    //         searchResults.innerHTML = y
    //       }else{
    //         searchResults.classList.add('d-none')
    //         e.target.style.borderBottom = '1px solid grey'
    //         e.target.style.borderRadius = '15px'
    //       }
    //       console.log(res)
    //     },
    //     error: function (res) {
    //       console.log(res.error)
    //     }
    //    } )
    // })
    const sideNav = document.getElementById('nav');
sideNav.addEventListener('mouseover', (e) => {
  Array.from(sideNav.children).forEach(element => {
    if (element.classList.contains('navborder')){
    element.style.paddingRight = '24px'
  }
      element.firstElementChild.style.display = 'block';
      sideNav.style.width = '8%'
  });
});
sideNav.addEventListener('mouseout', (e) => {
  Array.from(sideNav.children).forEach(element => {
    if (element.classList.contains('navborder')){
    element.style.paddingRight = '17px'
  }
      element.firstElementChild.style.display = 'none'; 
      sideNav.style.width = '55px'  
  });
});  
</script>

</body>
</html>